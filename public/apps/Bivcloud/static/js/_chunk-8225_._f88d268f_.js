(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-8225"],{IogV:function(t,e,a){},U7nq:function(t,e,a){"use strict";a.d(e,"b",function(){return p}),a.d(e,"e",function(){return g}),a.d(e,"d",function(){return f}),a.d(e,"f",function(){return m}),a.d(e,"c",function(){return h}),a.d(e,"g",function(){return b}),a.d(e,"a",function(){return q});var n=a("t3Un"),o="/datatable?method=",r="/plot?method=",u="/production/plan",c="http://www.bivrost.cn",s="/production/product",l="/production/group",d="/user",i="/chartdata";function p(t){return Object(n.a)({url:c+o+"getStats",method:"post",params:t})}function g(t,e){return Object(n.a)({url:c+r+t,method:"post",data:e})}function f(t){return Object(n.a)({url:c+u,method:"post",data:t})}function m(t){return Object(n.a)({url:c+s,method:"post",data:t})}function h(t){return Object(n.a)({url:c+l,method:"post",data:t})}function b(t){return Object(n.a)({url:c+d,method:"post",data:t})}function q(t){return Object(n.a)({url:c+i,method:"post",data:t})}},"X+Tz":function(t,e,a){"use strict";var n=a("aBQe");a.n(n).a},aBQe:function(t,e,a){},p8J8:function(t,e,a){"use strict";a.r(e);var n=a("U7nq");a("IogV");var o={name:"produceCalendar",data:function(){return{productData:{},productPlanData:[],res:{},totalData:0,currentPage:1,pageSize:20,addTaskDialogVisible:!1,userData:{},product:{},request:{method:"read",query:{page:1,limit:8,product_id:"",begin:"",end:""}},ganttData2:[],ganttData:[]}},computed:{},watch:{request:{handler:function(t){console.log(t)},deep:!0}},created:function(){var t=this;Object(n.f)({method:"read",query:{page:1,limit:999}}).then(function(e){t.productData=e.data.data,t.getProductPlanData()}).catch(function(e){console.log(e),t.$message({message:"数据加载失败！"+e,type:"error"}),t.laoding=!1})},mounted:function(){},methods:{getProductPlanData:function(){var t=this;t.loading=!0,Object(n.d)(t.request).then(function(e){t.res=e,t.productPlanData=e.data.data.results,t.ganttData=e.data.data.results.map(function(t){var e={};return e.start=t.begin.split("T")[0],e.end=t.end.split("T")[0],e.name=t.title,e.id=t.id,e.progress=0,e}),t.makeGantt(),t.loading=!1,t.$message({message:"数据获取成功-!",type:"success"})}).catch(function(e){console.log(e),t.$message({message:"request failed",type:"error"}),t.laoding=!1}),t.addTaskDialogVisible=!1},selectBtnClick:function(){this.getProductPlanData()},makeGantt:function(){var t=new Gantt(document.getElementById("gantt"),this.ganttData,{on_click:function(t){console.log(t)},on_date_change:function(t,e,a){console.log(t,e,a)},on_progress_change:function(t,e){console.log(t,e)},on_view_change:function(t){console.log(t)},view_mode:"Day",language:"ch"});console.log(t)}}},r=(a("X+Tz"),a("KHd+")),u=Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",[a("el-row",{staticStyle:{margin:"22px"}},[a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择生产产品"},model:{value:t.request.query.product_id,callback:function(e){t.$set(t.request.query,"product_id",e)},expression:"request.query.product_id"}},t._l(t.productData.results,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择开始日期"},model:{value:t.request.query.begin,callback:function(e){t.$set(t.request.query,"begin",e)},expression:"request.query.begin"}})],1)]),t._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择结束日期"},model:{value:t.request.query.end,callback:function(e){t.$set(t.request.query,"end",e)},expression:"request.query.end"}})],1)]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){t.selectBtnClick()}}},[t._v("查询")])],1)],1)],1),t._v(" "),a("el-main",[a("div",{attrs:{id:"gantt"}})]),t._v(" "),a("el-footer")],1)},[],!1,null,"330aebad",null);u.options.__file="produceCalendar.vue";e.default=u.exports}}]);