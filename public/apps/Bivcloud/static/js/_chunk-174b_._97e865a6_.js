(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-174b"],{EQxX:function(t,e,n){},IogV:function(t,e,n){},U7nq:function(t,e,n){"use strict";n.d(e,"b",function(){return m}),n.d(e,"e",function(){return h}),n.d(e,"j",function(){return b}),n.d(e,"d",function(){return q}),n.d(e,"f",function(){return k}),n.d(e,"c",function(){return v}),n.d(e,"h",function(){return y}),n.d(e,"a",function(){return w}),n.d(e,"g",function(){return D}),n.d(e,"i",function(){return _});var a=n("t3Un"),r="/datatable",o="/analysis",u="/analysis/variable",c="/production/plan",i="/role",s="/user/list",l="http://www.bivrost.cn",d="/production/product",p="/production/group",g="/user",f="/chartdata";function m(t){return Object(a.a)({url:l+r,method:"get",params:t})}function h(t,e){return Object(a.a)({url:l+o,method:"post",data:e})}function b(t){return Object(a.a)({url:l+u,method:"post",data:t})}function q(t){return Object(a.a)({url:l+c,method:"post",data:t})}function k(t){return Object(a.a)({url:l+d,method:"post",data:t})}function v(t){return Object(a.a)({url:l+p,method:"post",data:t})}function y(t){return Object(a.a)({url:l+g,method:"post",data:t})}function w(t){return Object(a.a)({url:l+f,method:"post",data:t})}function D(t){return Object(a.a)({url:l+i,method:"post",data:t})}function _(t){return Object(a.a)({url:l+s,method:"post",data:t})}},V6kl:function(t,e,n){"use strict";var a=n("EQxX");n.n(a).a},e9fG:function(t,e,n){"use strict";n.r(e);var a=n("U7nq");n("IogV");var r={name:"ProduceCalendar",data:function(){return{productData:{},productPlanData:[],res:{},totalData:0,currentPage:1,pageSize:20,addTaskDialogVisible:!1,userData:{},product:{},request:{query:{begin:"",end:""}},newRequest:{method:"read",query:{page:1,limit:999,product_id:"",begin:"",end:""}},ganttData2:[],ganttData:[],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-6048e5),t.$emit("pick",[n,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-2592e6),t.$emit("pick",[n,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-7776e6),t.$emit("pick",[n,e])}}]}}},computed:{},watch:{"request.query.begin":function(t){this.newRequest.query.begin={range:t}},"request.query.end":function(t){this.newRequest.query.end={range:t}}},created:function(){var t=this;Object(a.f)({method:"read",query:{page:1,limit:999}}).then(function(e){t.productData=e.data.data,t.getProductPlanData()}).catch(function(e){console.log(e),t.$message({message:"数据加载失败！"+e,type:"error"}),t.laoding=!1})},mounted:function(){},methods:{getProductPlanData:function(){var t=this;t.loading=!0,Object(a.d)(t.newRequest).then(function(e){t.res=e,t.productPlanData=e.data.data.results,t.ganttData=e.data.data.results.map(function(t){var e={};return e.start=t.begin.split("T")[0],e.end=t.end.split("T")[0],e.name=t.title,e.id=t.id,e.progress=0,e}),t.makeGantt(),t.loading=!1,t.$message({message:"数据获取成功-!",type:"success"})}).catch(function(e){console.log(e),t.$message({message:"request failed",type:"error"}),t.laoding=!1}),t.addTaskDialogVisible=!1},selectBtnClick:function(){this.getProductPlanData()},makeGantt:function(){var t=new Gantt(document.getElementById("gantt"),this.ganttData,{on_click:function(t){console.log(t)},on_date_change:function(t,e,n){console.log(t,e,n)},on_progress_change:function(t,e){console.log(t,e)},on_view_change:function(t){console.log(t)},view_mode:"Day",language:"ch"});console.log(t)}}},o=(n("V6kl"),n("KHd+")),u=Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-header",{staticStyle:{height:"auto!important"}},[n("el-row",{staticStyle:{margin:"22px"}},[n("el-col",{attrs:{span:4}},[n("el-select",{attrs:{clearable:"",multiple:"",placeholder:"请选择生产产品"},model:{value:t.newRequest.query.product_id,callback:function(e){t.$set(t.newRequest.query,"product_id",e)},expression:"newRequest.query.product_id"}},t._l(t.productData.results,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"block"},[n("el-date-picker",{attrs:{"picker-options":t.pickerOptions2,type:"daterange",width:"300","range-separator":"至","start-placeholder":"开始日期起点","end-placeholder":"开始日期终点"},model:{value:t.request.query.begin,callback:function(e){t.$set(t.request.query,"begin",e)},expression:"request.query.begin"}})],1)]),t._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"block"},[n("el-date-picker",{attrs:{"picker-options":t.pickerOptions2,type:"daterange",width:"300","range-separator":"至","start-placeholder":"结束日期起点","end-placeholder":"结束日期终点"},model:{value:t.request.query.end,callback:function(e){t.$set(t.request.query,"end",e)},expression:"request.query.end"}})],1)]),t._v(" "),n("el-col",{attrs:{span:3}},[n("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){t.selectBtnClick()}}},[t._v("查询")])],1)],1)],1),t._v(" "),n("el-main",[n("div",{attrs:{id:"gantt"}})]),t._v(" "),n("el-footer")],1)},[],!1,null,"0c40e37e",null);u.options.__file="produceCalendar.vue";e.default=u.exports}}]);