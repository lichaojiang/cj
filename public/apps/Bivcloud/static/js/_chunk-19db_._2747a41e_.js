(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-19db"],{CidH:function(t,e,a){"use strict";var r=a("d/mx");a.n(r).a},U7nq:function(t,e,a){"use strict";a.d(e,"b",function(){return m}),a.d(e,"e",function(){return _}),a.d(e,"d",function(){return b}),a.d(e,"f",function(){return f}),a.d(e,"c",function(){return y}),a.d(e,"h",function(){return v}),a.d(e,"a",function(){return g}),a.d(e,"g",function(){return q}),a.d(e,"i",function(){return k});var r=a("t3Un"),n="/datatable",l="/analysis",i="/production/plan",c="/role",o="/user/list",s="http://www.bivrost.cn",u="/production/product",d="/production/group",p="/user",h="/chartdata";function m(t){return Object(r.a)({url:s+n,method:"get",params:t})}function _(t,e){return Object(r.a)({url:s+l,method:"post",data:e})}function b(t){return Object(r.a)({url:s+i,method:"post",data:t})}function f(t){return Object(r.a)({url:s+u,method:"post",data:t})}function y(t){return Object(r.a)({url:s+d,method:"post",data:t})}function v(t){return Object(r.a)({url:s+p,method:"post",data:t})}function g(t){return Object(r.a)({url:s+h,method:"post",data:t})}function q(t){return Object(r.a)({url:s+c,method:"post",data:t})}function k(t){return Object(r.a)({url:s+o,method:"post",data:t})}},Zc4Q:function(t,e,a){"use strict";a.r(e);var r=a("U7nq"),n={name:"Statistics",components:{IEcharts:a("zkRF").a},filters:{dateFilter:function(t){return t.toLocaleString()}},data:function(){return{testData:"",showBarChart:!1,chartData:[],data_list:[],query:{date:[new Date(2018,6,13),new Date(2018,6,30)],machine:1,type:"pace"},date_shortcut:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},machine_list:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"}],type_list:[{value:"cycle",label:"cycle"},{value:"pace",label:"pace"}],bar_chart_option:{title:{text:""},legend:{data:[]},tooltip:{},xAxis:{data:["最小值","25%分位数","中位数","75%分位数","最大值","平均值","标准差"]},yAxis:{},series:[]}}},computed:{is_add_available:function(){return!(this.query.date[0]&&this.query.date[1]&&this.query.machine&&this.query.type)}},watch:{data_list:function(t){this.chartData=[];for(var e=0;e<this.data_list.length;e++)this.chartData.push(e)},chartData:function(t){this.refreshChart()}},created:function(){},methods:{add_data:function(){var t=this,e={method:"getStats",start:t.query.date[0].toLocaleString("zh-CN",{hour12:!1}).replace(/\//g,"-").replace("上午","").replace("下午","").substring(0,19),end:t.query.date[1].toLocaleString("zh-CN",{hour12:!1}).replace(/\//g,"-").replace("上午","").replace("下午",""),machine:t.query.machine,type:t.query.type};Object(r.b)(e).then(function(e){var a={type:t.query.type,date:t.query.date,machine:t.query.machine,sum:e.data.data.count,average:e.data.data.mean,mid:e.data.data["50%"],_1to4:e.data.data["25%"],_3to4:e.data.data["75%"],standard:e.data.data.std,max:e.data.data.max,min:e.data.data.min};t.data_list.push(a),t.query.type=3===Number(t.query.machine)?"pace"===t.query.type?"cycle":"pace":t.query.type,t.query.machine=3!==Number(t.query.machine)?t.query.machine+1:1}).catch(function(t){console.log(t)})},click2ShowChart:function(){this.showBarChart=!0,this.refreshChart()},refreshChart:function(){var t=this;this.bar_chart_option={title:{text:""},legend:{data:[]},tooltip:{},xAxis:{data:["最小值","25%分位数","中位数","75%分位数","最大值","平均值","标准差"]},yAxis:{},series:[]},t.chartData.forEach(function(e,a,r){t.bar_chart_option.series.push({name:"#"+(e+1)+"("+t.data_list[e].machine+"机台@"+t.data_list[e].type+")",type:"bar",data:[t.data_list[e].min,t.data_list[e]._1to4,t.data_list[e].mid,t.data_list[e]._3to4,t.data_list[e].max,t.data_list[e].average,t.data_list[e].standard]}),t.bar_chart_option.legend.data.push("#"+(e+1)+"("+t.data_list[e].machine+"机台@"+t.data_list[e].type+")")})},chartOnReady:function(t,e){},chartOnClick:function(t,e,a){}}},l=(a("CidH"),a("KHd+")),i=Object(l.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"statistics"}},[a("el-container",[a("el-header",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{disabled:t.data_list.length<=2,type:"primary",icon:"el-icon-date",circle:""},on:{click:t.click2ShowChart}})],1),t._v(" "),a("el-col",{staticClass:"date-pick",attrs:{span:11}},[a("el-date-picker",{attrs:{"picker-options":t.date_shortcut,type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:t.query.date,callback:function(e){t.$set(t.query,"date",e)},expression:"query.date"}})],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-select",{attrs:{placeholder:"机台"},model:{value:t.query.machine,callback:function(e){t.$set(t.query,"machine",e)},expression:"query.machine"}},t._l(t.machine_list,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-select",{attrs:{placeholder:"类型"},model:{value:t.query.type,callback:function(e){t.$set(t.query,"type",e)},expression:"query.type"}},t._l(t.type_list,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{disabled:t.is_add_available,type:"primary",icon:"el-icon-plus",circle:""},on:{click:t.add_data}})],1)],1)],1),t._v(" "),a("el-main",[a("el-table",{attrs:{data:t.data_list}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"开始时间"}},[a("span",[t._v(t._s(t._f("dateFilter")(e.row.date[0])))])]),t._v(" "),a("el-form-item",{attrs:{label:"结束时间"}},[a("span",[t._v(t._s(t._f("dateFilter")(e.row.date[1])))])]),t._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("span",[t._v(t._s(e.row.type))])])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"机台",prop:"machine"}}),t._v(" "),a("el-table-column",{attrs:{label:"总数",prop:"sum"}}),t._v(" "),a("el-table-column",{attrs:{label:"平均值",prop:"average"}}),t._v(" "),a("el-table-column",{attrs:{label:"中位数",prop:"mid"}}),t._v(" "),a("el-table-column",{attrs:{label:"25%分位",prop:"_1to4"}}),t._v(" "),a("el-table-column",{attrs:{label:"75%分位",prop:"_3to4"}}),t._v(" "),a("el-table-column",{attrs:{label:"标准差",prop:"standard"}}),t._v(" "),a("el-table-column",{attrs:{label:"最大值",prop:"max"}}),t._v(" "),a("el-table-column",{attrs:{label:"最小值",prop:"min"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-minus",circle:"",size:"mini"},nativeOn:{click:function(a){a.preventDefault(),t.data_list.splice(e.$index,1)}}})]}}])})],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.showBarChart,title:"数据对比",center:""},on:{"update:visible":function(e){t.showBarChart=e}}},[a("div",{staticClass:"bar_chart"},[a("IEcharts",{attrs:{option:t.bar_chart_option},on:{ready:t.chartOnReady,click:t.chartOnClick}})],1)])],1)},[],!1,null,null,null);i.options.__file="statistics.vue";e.default=i.exports},"d/mx":function(t,e,a){}}]);