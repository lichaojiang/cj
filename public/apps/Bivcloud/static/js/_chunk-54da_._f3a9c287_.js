(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-54da"],{IogV:function(t,e,n){},LO5A:function(t,e,n){"use strict";var a=n("c8B8");n.n(a).a},U7nq:function(t,e,n){"use strict";n.d(e,"b",function(){return p}),n.d(e,"e",function(){return g}),n.d(e,"d",function(){return f}),n.d(e,"f",function(){return m}),n.d(e,"c",function(){return h}),n.d(e,"g",function(){return q}),n.d(e,"a",function(){return b});var a=n("t3Un"),r="/datatable",o="/plot",c="/production/plan",i="http://www.bivrost.cn",u="/production/product",s="/production/group",l="/user",d="/chartdata";function p(t){return Object(a.a)({url:i+r+"getStats",method:"post",params:t})}function g(t,e){return Object(a.a)({url:i+o,method:"post",data:e})}function f(t){return Object(a.a)({url:i+c,method:"post",data:t})}function m(t){return Object(a.a)({url:i+u,method:"post",data:t})}function h(t){return Object(a.a)({url:i+s,method:"post",data:t})}function q(t){return Object(a.a)({url:i+l,method:"post",data:t})}function b(t){return Object(a.a)({url:i+d,method:"post",data:t})}},c8B8:function(t,e,n){},p8J8:function(t,e,n){"use strict";n.r(e);var a=n("U7nq");n("IogV");var r={name:"ProduceCalendar",data:function(){return{productData:{},productPlanData:[],res:{},totalData:0,currentPage:1,pageSize:20,addTaskDialogVisible:!1,userData:{},product:{},request:{query:{begin:"",end:""}},newRequest:{method:"read",query:{page:1,limit:999,product_id:"",begin:"",end:""}},ganttData2:[],ganttData:[],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-6048e5),t.$emit("pick",[n,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-2592e6),t.$emit("pick",[n,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-7776e6),t.$emit("pick",[n,e])}}]}}},computed:{},watch:{"request.query.begin":function(t){this.newRequest.query.begin={range:t}},"request.query.end":function(t){this.newRequest.query.end={range:t}}},created:function(){var t=this;Object(a.f)({method:"read",query:{page:1,limit:999}}).then(function(e){t.productData=e.data.data,t.getProductPlanData()}).catch(function(e){console.log(e),t.$message({message:"数据加载失败！"+e,type:"error"}),t.laoding=!1})},mounted:function(){},methods:{getProductPlanData:function(){var t=this;t.loading=!0,Object(a.d)(t.newRequest).then(function(e){t.res=e,t.productPlanData=e.data.data.results,t.ganttData=e.data.data.results.map(function(t){var e={};return e.start=t.begin.split("T")[0],e.end=t.end.split("T")[0],e.name=t.title,e.id=t.id,e.progress=0,e}),t.makeGantt(),t.loading=!1,t.$message({message:"数据获取成功-!",type:"success"})}).catch(function(e){console.log(e),t.$message({message:"request failed",type:"error"}),t.laoding=!1}),t.addTaskDialogVisible=!1},selectBtnClick:function(){this.getProductPlanData()},makeGantt:function(){var t=new Gantt(document.getElementById("gantt"),this.ganttData,{on_click:function(t){console.log(t)},on_date_change:function(t,e,n){console.log(t,e,n)},on_progress_change:function(t,e){console.log(t,e)},on_view_change:function(t){console.log(t)},view_mode:"Day",language:"ch"});console.log(t)}}},o=(n("LO5A"),n("KHd+")),c=Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-header",{staticStyle:{height:"auto!important"}},[n("el-row",{staticStyle:{margin:"22px"}},[n("el-col",{attrs:{span:4}},[n("el-select",{attrs:{clearable:"",multiple:"",placeholder:"请选择生产产品"},model:{value:t.newRequest.query.product_id,callback:function(e){t.$set(t.newRequest.query,"product_id",e)},expression:"newRequest.query.product_id"}},t._l(t.productData.results,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"block"},[n("el-date-picker",{attrs:{"picker-options":t.pickerOptions2,type:"daterange",width:"300","range-separator":"至","start-placeholder":"开始日期起点","end-placeholder":"开始日期终点"},model:{value:t.request.query.begin,callback:function(e){t.$set(t.request.query,"begin",e)},expression:"request.query.begin"}})],1)]),t._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"block"},[n("el-date-picker",{attrs:{"picker-options":t.pickerOptions2,type:"daterange",width:"300","range-separator":"至","start-placeholder":"结束日期起点","end-placeholder":"结束日期终点"},model:{value:t.request.query.end,callback:function(e){t.$set(t.request.query,"end",e)},expression:"request.query.end"}})],1)]),t._v(" "),n("el-col",{attrs:{span:3}},[n("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){t.selectBtnClick()}}},[t._v("查询")])],1)],1)],1),t._v(" "),n("el-main",[n("div",{attrs:{id:"gantt"}})]),t._v(" "),n("el-footer")],1)},[],!1,null,"3158542d",null);c.options.__file="produceCalendar.vue";e.default=c.exports}}]);