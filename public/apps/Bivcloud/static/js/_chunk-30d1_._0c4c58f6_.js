(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-30d1"],{"7cRC":function(e,t,a){"use strict";var r=a("pDsn");a.n(r).a},EfNl:function(e,t,a){"use strict";a.r(t);var r=a("gDS+"),i=a.n(r),s=a("YEIV"),o=a.n(s),n=a("U7nq"),l=a("HGe9"),c=a.n(l);a("Kw5r").default.use(c.a);var m={name:"UserAdmin",data:function(){return{userData:[],roleData:[],totalData:0,currentPage:1,pageSize:20,formOption:{title:"",nameInputAble:!0,mailInputAble:!0,showDeleteBtn:!1,neewPassword:!0},query:{privilege:[]},addTaskDialogVisible:!1,formData:{name:"",email:"@bivrost.cn",nickname:"",phone:"",password:"",gender:"",role:[],department_id:""},formDataModel:{name:"",email:"@bivrost.cn",nickname:"",phone:"",password:"",gender:"",department_id:"",role:[]},loginRules:{name:[{required:!0,trigger:"blur",message:"请输入姓名！"}],mail:[{required:!0,trigger:"blur",message:"请输入邮箱地址！",type:"mail"}],phone:[{required:!0,trigger:"blur",message:"请输入联系方式！"}],password:[{required:!0,trigger:"blur",message:"请输入密码！"}]},privilegeList:{admin:"管理员",analysis:"数据分析",production:"生产管理",user:"用户管理",monitor:"实时监控"},noData:"",moveList:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]}},beforeMount:function(){this.getUserInfo(),this.getRole()},mounted:function(){new Swiper("#line-slide",o()({slidesPerView:6,scrollbar:".swiper-scrollbar"},"slidesPerView","auto")),new Swiper("#button-menu",{direction:"horizontal",loop:!0,pagination:".swiper-pagination",nextButton:".swiper-button-next",prevButton:".swiper-button-prev"})},methods:{getRole:function(){var e=this;Object(n.g)({method:"read",query:{page:1,limit:999}}).then(function(t){e.roleData=t.data.data.results}).catch(function(t){e.$message({message:"数据加载失败！"+t,type:"error"})})},getUserInfo:function(){var e=this;Object(n.h)({method:"read",query:{page:e.currentPage,limit:e.pageSize,privilege:e.query.privilege}}).then(function(t){e.userData=t.data.data.results,e.totalData=t.data.data.total}).catch(function(t){e.$message({message:"数据加载失败！"+t,type:"error"})})},addTaskDialogConfirm:function(){var e=this,t=this,a=JSON.parse(i()(t.formData)),r="create";t.formOption.showDeleteBtn&&(r="update",null===a.nickname&&(a.nickname="")),console.log(a),console.log(t.roleData);var s=function(t){var r=e.roleData.find(function(e){return e.name===a.role[t]});a.role[t]=r.id};for(var o in a.role)s(o);a.role_id=a.role,delete a.role,delete a.department_name,Object(n.h)({method:r,query:a}).then(function(e){t.$message({message:"create"===r?"用户新增成功！":"用户信息更新成功！",type:"success"}),t.getUserInfo(),t.addTaskDialogVisible=!1}).catch(function(e){console.log(e),t.$message({message:"create"===r?"新增失败！"+e:"更新失败！"+e,type:"error"})})},addNewUser:function(){this.formData=this.formDataModel,this.addTaskDialogVisible=!0,this.formOption.showDeleteBtn=!1,this.formOption.needPassword=!0,this.formOption.title="添加新成员",this.loginRules.password[0].required=!0},formDeleteBtn:function(){var e=this;e.$confirm("确定删除？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return Object(n.h)({method:"delete",query:{id:e.formData.id}}).then(function(){e.$message({message:"删除成功！",type:"success"}),e.getUserInfo(),e.addTaskDialogVisible=!1})}).catch(function(t){e.$message({message:"删除失败！"+t,type:"error"})})},selectBtnClick:function(){this.getUserInfo()},cellEditClick:function(e){console.log(e);var t=JSON.parse(i()(e.row));this.formData=t,this.formData.password="",this.addTaskDialogVisible=!0,this.formOption.showDeleteBtn=!0,this.formOption.needPassword=!1,this.loginRules.password[0].required=!1,this.formOption.title="编辑成员信息"},handleSizeChange:function(e){this.pageSize=e,this.getUserInfo()},handleCurrentChange:function(e){this.currentPage=e,this.getUserInfo()},infinite:function(e){var t=this;if(this.noData)setTimeout(function(){t.$refs.myscroller.finishInfinite(2)});else{var a=this,r=this.moveList.length;setTimeout(function(){for(var t=r+1;t<r+10;t++)a.moveList.push(t);r>30&&(a.noData="没有更多数据"),a.$refs.myscroller.resize(),e()},1500)}},refresh:function(){console.log("refresh")}}},d=(a("7cRC"),a("KHd+")),p=Object(d.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"userAdmin"}},[a("el-dialog",{attrs:{visible:e.addTaskDialogVisible,title:e.formOption.title,width:"80%"},on:{"update:visible":function(t){e.addTaskDialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.loginRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓名：",prop:"name"}},[a("el-input",{model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱：",prop:"email"}},[a("el-input",{model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email",t)},expression:"formData.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码：",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"昵称：",prop:"nickname"}},[a("el-input",{model:{value:e.formData.nickname,callback:function(t){e.$set(e.formData,"nickname",t)},expression:"formData.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码：",prop:"phone"}},[a("el-input",{model:{value:e.formData.phone,callback:function(t){e.$set(e.formData,"phone",t)},expression:"formData.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别："}},[a("el-select",{model:{value:e.formData.gender,callback:function(t){e.$set(e.formData,"gender",t)},expression:"formData.gender"}},[a("el-option",{attrs:{label:"男",value:"male"}}),e._v(" "),a("el-option",{attrs:{label:"女",value:"female"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"权限分组：",prop:"state"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择权限",multiple:""},model:{value:e.formData.role,callback:function(t){e.$set(e.formData,"role",t)},expression:"formData.role"}},e._l(e.roleData,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"部门："}},[a("el-input",{model:{value:e.formData.department_id,callback:function(t){e.$set(e.formData,"department_id",t)},expression:"formData.department_id"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.formOption.showDeleteBtn,expression:"formOption.showDeleteBtn"}],attrs:{type:"danger"},on:{click:e.formDeleteBtn}},[e._v("删除")]),e._v(" "),a("el-button",{on:{click:function(t){e.addTaskDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{disabled:!e.formData.name||!e.formData.email||!e.formData.phone||!e.formData.password&&e.formOption.needPassword,type:"primary"},on:{click:function(t){e.addTaskDialogConfirm()}}},[e._v("确 定")])],1)],1),a("el-container",[a("el-header",[a("el-row",{staticStyle:{margin:"22px"}},[a("el-col",{attrs:{span:16}},[a("el-select",{attrs:{name:"user",placeholder:"按角色选择",multiple:""},model:{value:e.query.privilege,callback:function(t){e.$set(e.query,"privilege",t)},expression:"query.privilege"}},e._l(e.privilegeList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}))],1),e._v(" "),a("el-col",{attrs:{span:6,offset:2}},[a("div",{staticClass:"grid-content"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:e.addNewUser}})],1)])],1)],1),e._v(" "),a("el-main",{staticClass:"main-main"},[a("scroller",{ref:"myscroller",attrs:{"on-infinite":e.infinite}},[a("div",{staticClass:"index-header"},[a("div",{staticClass:"positionbar"},[a("div",{staticClass:"position-box"},[a("i",{staticClass:"icon iconfont icon-dingwei"}),e._v(" "),a("span",{staticClass:"text"},[e._v("\n                东城区北京市政府\n              ")])]),e._v(" "),a("div",{staticClass:"weather-box"},[a("div",{staticClass:"du"},[a("h2",[e._v("28℃")]),e._v(" "),a("p",[e._v("多云天")])]),e._v(" "),a("img",{staticClass:"could",attrs:{src:"//fuss10.elemecdn.com/2/52/5383cfd55c8ba454449f63f54ce2apng.png?imageMogr/format/webp/thumbnail/!69x69r/gravity/Center/crop/69x69/",alt:""}})])]),e._v(" "),a("div",{staticClass:"search-box"},[e._v("\n            搜索商家、商品\n          ")]),e._v(" "),a("div",{staticClass:"swiper-box"},[a("div",{staticClass:"swiper-container",attrs:{id:"line-slide"}},[a("div",{staticClass:"swiper-wrapper"},[a("div",{staticClass:"swiper-slide",staticStyle:{width:"auto"}},[e._v("煎饼")]),e._v(" "),a("div",{staticClass:"swiper-slide",staticStyle:{width:"auto"}},[e._v("虾饭先生")]),e._v(" "),a("div",{staticClass:"swiper-slide",staticStyle:{width:"auto"}},[e._v("蛋挞 ")]),e._v(" "),a("div",{staticClass:"swiper-slide",staticStyle:{width:"auto"}},[e._v("立秋进补")]),e._v(" "),a("div",{staticClass:"swiper-slide",staticStyle:{width:"auto"}},[e._v("我的屏 ")]),e._v(" "),a("div",{staticClass:"swiper-slide",staticStyle:{width:"auto"}},[e._v("鲜榨果汁")]),e._v(" "),a("div",{staticClass:"swiper-slide",staticStyle:{width:"auto"}},[e._v("石锅拌饭")]),e._v(" "),a("div",{staticClass:"swiper-slide",staticStyle:{width:"auto"}},[e._v("黄焖鸡")]),e._v(" "),a("div",{staticClass:"swiper-slide",staticStyle:{width:"auto"}},[e._v("虾")])]),e._v(" "),a("div",{staticClass:"swiper-scrollbar"})])])]),e._v(" "),a("div",{staticClass:"slide-box"},[a("div",{staticClass:"swiper-container",attrs:{id:"button-menu"}},[a("div",{staticClass:"swiper-wrapper"},[a("div",{staticClass:"swiper-slide"},[a("ul",{staticClass:"btn-group"},[a("li",[a("a",{attrs:{href:"javascript:;"}},[a("img",{attrs:{src:"//fuss10.elemecdn.com/b/7e/d1890cf73ae6f2adb97caa39de7fcjpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/",alt:""}}),e._v(" "),a("span",[e._v("美食")])])]),e._v(" "),a("li",[a("a",{attrs:{href:"javascript:;"}},[a("img",{attrs:{src:"//fuss10.elemecdn.com/2/35/696aa5cf9820adada9b11a3d14bf5jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/",alt:""}}),e._v(" "),a("span",[e._v("甜品饮品")])])]),e._v(" "),a("li",[a("a",{attrs:{href:"javascript:;"}},[a("img",{attrs:{src:"//fuss10.elemecdn.com/0/da/f42235e6929a5cb0e7013115ce78djpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/",alt:""}}),e._v(" "),a("span",[e._v("商超便利")])])]),e._v(" "),a("li",[a("a",{attrs:{href:"javascript:;"}},[a("img",{attrs:{src:"//fuss10.elemecdn.com/d/49/7757ff22e8ab28e7dfa5f7e2c2692jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/",alt:""}}),e._v(" "),a("span",[e._v("预定早餐")])])]),e._v(" "),a("li",[a("a",{attrs:{href:"javascript:;"}},[a("img",{attrs:{src:"//fuss10.elemecdn.com/c/db/d20d49e5029281b9b73db1c5ec6f9jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/",alt:""}}),e._v(" "),a("span",[e._v("果蔬生鲜")])])]),e._v(" "),a("li",[a("a",{attrs:{href:"javascript:;"}},[a("img",{attrs:{src:"//fuss10.elemecdn.com/a/fa/d41b04d520d445dc5de42dae9a384jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/",alt:""}}),e._v(" "),a("span",[e._v("新店特惠")])])]),e._v(" "),a("li",[a("a",{attrs:{href:"javascript:;"}},[a("img",{attrs:{src:"//fuss10.elemecdn.com/3/84/8e031bf7b3c036b4ec19edff16e46jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/",alt:""}}),e._v(" "),a("span",[e._v("准时达")])])]),e._v(" "),a("li",[a("a",{attrs:{href:"javascript:;"}},[a("img",{attrs:{src:"//fuss10.elemecdn.com/d/38/7bddb07503aea4b711236348e2632jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/",alt:""}}),e._v(" "),a("span",[e._v("午餐")])])])])]),e._v(" "),a("div",{staticClass:"swiper-slide"},[a("ul",{staticClass:"btn-group"},[a("li",[a("a",{attrs:{href:"javascript:;"}},[a("img",{attrs:{src:"//fuss10.elemecdn.com/b/7f/432619fb21a40b05cd25d11eca02djpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/",alt:""}}),e._v(" "),a("span",[e._v("汉堡薯条")])])]),e._v(" "),a("li",[a("a",{attrs:{href:"javascript:;"}},[a("img",{attrs:{src:"//fuss10.elemecdn.com/2/17/244241b514affc0f12f4168cf6628jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/",alt:""}}),e._v(" "),a("span",[e._v("包子粥店")])])]),e._v(" "),a("li",[a("a",{attrs:{href:"javascript:;"}},[a("img",{attrs:{src:"//fuss10.elemecdn.com/8/83/171fd98b85dee3b3f4243b7459b48jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/",alt:""}}),e._v(" "),a("span",[e._v("鲜花蛋糕")])])]),e._v(" "),a("li",[a("a",{attrs:{href:"javascript:;"}},[a("img",{attrs:{src:"//fuss10.elemecdn.com/3/c7/a9ef469a12e7a596b559145b87f09jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/",alt:""}}),e._v(" "),a("span",[e._v("麻辣烫")])])]),e._v(" "),a("li",[a("a",{attrs:{href:"javascript:;"}},[a("img",{attrs:{src:"//fuss10.elemecdn.com/a/8a/ec21096d528b7cfd23cdd894f01c6jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/",alt:""}}),e._v(" "),a("span",[e._v("地方菜系")])])]),e._v(" "),a("li",[a("a",{attrs:{href:"javascript:;"}},[a("img",{attrs:{src:"//fuss10.elemecdn.com/7/b6/235761e50d391445f021922b71789jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/",alt:""}}),e._v(" "),a("span",[e._v("披萨意面")])])]),e._v(" "),a("li",[a("a",{attrs:{href:"javascript:;"}},[a("img",{attrs:{src:"//fuss10.elemecdn.com/6/d2/de0683a49a0655c728b70fdb344d5jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/",alt:""}}),e._v(" "),a("span",[e._v("异国料理")])])])])])]),e._v(" "),a("div",{staticClass:"swiper-pagination"})])]),e._v(" "),a("div",{staticClass:"shop-box"},[a("ul",e._l(e.movieList,function(t){return a("li",[a("h4",[e._v(e._s(t))])])}))])])],1)],1)],1)},[],!1,null,"bc116034",null);p.options.__file="userAdmin_m.vue";t.default=p.exports},U7nq:function(e,t,a){"use strict";a.d(t,"b",function(){return f}),a.d(t,"e",function(){return v}),a.d(t,"d",function(){return g}),a.d(t,"f",function(){return b}),a.d(t,"c",function(){return h}),a.d(t,"h",function(){return _}),a.d(t,"a",function(){return w}),a.d(t,"g",function(){return D}),a.d(t,"i",function(){return j});var r=a("t3Un"),i="/datatable",s="/analysis",o="/production/plan",n="/role",l="/user/list",c="http://www.bivrost.cn",m="/production/product",d="/production/group",p="/user",u="/chartdata";function f(e){return Object(r.a)({url:c+i,method:"get",params:e})}function v(e,t){return Object(r.a)({url:c+s,method:"post",data:t})}function g(e){return Object(r.a)({url:c+o,method:"post",data:e})}function b(e){return Object(r.a)({url:c+m,method:"post",data:e})}function h(e){return Object(r.a)({url:c+d,method:"post",data:e})}function _(e){return Object(r.a)({url:c+p,method:"post",data:e})}function w(e){return Object(r.a)({url:c+u,method:"post",data:e})}function D(e){return Object(r.a)({url:c+n,method:"post",data:e})}function j(e){return Object(r.a)({url:c+l,method:"post",data:e})}},pDsn:function(e,t,a){}}]);