(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-d9ce"],{EQxX:function(e,t,n){},IogV:function(e,t,n){},U7nq:function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"e",function(){return g}),n.d(t,"d",function(){return f}),n.d(t,"f",function(){return m}),n.d(t,"c",function(){return h}),n.d(t,"g",function(){return q}),n.d(t,"a",function(){return b});var a=n("t3Un"),r="/datatable",o="/analysis",c="/production/plan",i="http://www.bivrost.cn",u="/production/product",s="/production/group",l="/user",d="/chartdata";function p(e){return Object(a.a)({url:i+r,method:"get",params:e})}function g(e,t){return Object(a.a)({url:i+o,method:"post",data:t})}function f(e){return Object(a.a)({url:i+c,method:"post",data:e})}function m(e){return Object(a.a)({url:i+u,method:"post",data:e})}function h(e){return Object(a.a)({url:i+s,method:"post",data:e})}function q(e){return Object(a.a)({url:i+l,method:"post",data:e})}function b(e){return Object(a.a)({url:i+d,method:"post",data:e})}},V6kl:function(e,t,n){"use strict";var a=n("EQxX");n.n(a).a},e9fG:function(e,t,n){"use strict";n.r(t);var a=n("U7nq");n("IogV");var r={name:"ProduceCalendar",data:function(){return{productData:{},productPlanData:[],res:{},totalData:0,currentPage:1,pageSize:20,addTaskDialogVisible:!1,userData:{},product:{},request:{query:{begin:"",end:""}},newRequest:{method:"read",query:{page:1,limit:999,product_id:"",begin:"",end:""}},ganttData2:[],ganttData:[],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-7776e6),e.$emit("pick",[n,t])}}]}}},computed:{},watch:{"request.query.begin":function(e){this.newRequest.query.begin={range:e}},"request.query.end":function(e){this.newRequest.query.end={range:e}}},created:function(){var e=this;Object(a.f)({method:"read",query:{page:1,limit:999}}).then(function(t){e.productData=t.data.data,e.getProductPlanData()}).catch(function(t){console.log(t),e.$message({message:"数据加载失败！"+t,type:"error"}),e.laoding=!1})},mounted:function(){},methods:{getProductPlanData:function(){var e=this;e.loading=!0,Object(a.d)(e.newRequest).then(function(t){e.res=t,e.productPlanData=t.data.data.results,e.ganttData=t.data.data.results.map(function(e){var t={};return t.start=e.begin.split("T")[0],t.end=e.end.split("T")[0],t.name=e.title,t.id=e.id,t.progress=0,t}),e.makeGantt(),e.loading=!1,e.$message({message:"数据获取成功-!",type:"success"})}).catch(function(t){console.log(t),e.$message({message:"request failed",type:"error"}),e.laoding=!1}),e.addTaskDialogVisible=!1},selectBtnClick:function(){this.getProductPlanData()},makeGantt:function(){var e=new Gantt(document.getElementById("gantt"),this.ganttData,{on_click:function(e){console.log(e)},on_date_change:function(e,t,n){console.log(e,t,n)},on_progress_change:function(e,t){console.log(e,t)},on_view_change:function(e){console.log(e)},view_mode:"Day",language:"ch"});console.log(e)}}},o=(n("V6kl"),n("KHd+")),c=Object(o.a)(r,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticStyle:{height:"auto!important"}},[n("el-row",{staticStyle:{margin:"22px"}},[n("el-col",{attrs:{span:4}},[n("el-select",{attrs:{clearable:"",multiple:"",placeholder:"请选择生产产品"},model:{value:e.newRequest.query.product_id,callback:function(t){e.$set(e.newRequest.query,"product_id",t)},expression:"newRequest.query.product_id"}},e._l(e.productData.results,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"block"},[n("el-date-picker",{attrs:{"picker-options":e.pickerOptions2,type:"daterange",width:"300","range-separator":"至","start-placeholder":"开始日期起点","end-placeholder":"开始日期终点"},model:{value:e.request.query.begin,callback:function(t){e.$set(e.request.query,"begin",t)},expression:"request.query.begin"}})],1)]),e._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"block"},[n("el-date-picker",{attrs:{"picker-options":e.pickerOptions2,type:"daterange",width:"300","range-separator":"至","start-placeholder":"结束日期起点","end-placeholder":"结束日期终点"},model:{value:e.request.query.end,callback:function(t){e.$set(e.request.query,"end",t)},expression:"request.query.end"}})],1)]),e._v(" "),n("el-col",{attrs:{span:3}},[n("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){e.selectBtnClick()}}},[e._v("查询")])],1)],1)],1),e._v(" "),n("el-main",[n("div",{attrs:{id:"gantt"}})]),e._v(" "),n("el-footer")],1)},[],!1,null,"0c40e37e",null);c.options.__file="produceCalendar.vue";t.default=c.exports}}]);