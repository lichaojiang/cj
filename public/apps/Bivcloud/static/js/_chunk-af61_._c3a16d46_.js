(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-af61"],{"0n/l":function(t,a,e){"use strict";e.r(a);var i=e("gDS+"),l=e.n(i),n=e("U7nq"),s=e("zkRF"),r=(e("4F9Q"),{name:"Efficiency",components:{IEcharts:s.a},data:function(){return{activeName:"effiFirst",effiOptionTabs:"utilOption",allOptionTabs:"utilOption",variableDialogVisible:!1,variableOptionData:[],historyOptionData:[],baseVariableData:{data:[],total:0,currentPage:1},analysisVariableData:{data:[],total:0,currentPage:1},effiHistoryOptionData:[],effiCustomOptionData:[],allHistoryOptionData:[],allCustomOptionData:[],effiChartUtilData:{title:"图表",xName:"日期",yName:"数值",variables:"throughput,elasped,setup,poweroff",recipe:"3600*throughput/(elasped-setup-poweroff)",days:"7"},allChartUtilData:{title:"图表",xName:"次数",yName:"数值",type:"pace"},leftCardStyle:{width:"20%"},leftCardOpen:!0,leftBtnClass:{open:"left-card-switch-open",close:"left-card-switch-close"},topCardOpen:!0,topBtnClass:{open:"top-card-switch-open",close:"top-card-switch-close"},selectID:2,headDataEffi:[{id:"0",machine:"1",start_date:"2018-07-18",intervals:["12:00","18:00"],alias:""}],headDataAll:[void 0,{id:"1",machine:"1",interval:["2018-07-16 13:30:00","2018-07-16 17:30:00"],min:"0",max:"900"}],dataModel:{id:"",machine:"1",start_date:"2018-07-18",intervals:["12:00","18:00"],alias:""},dataModelAll:{id:"",machine:"1",interval:["2018-07-16 13:30:00","2018-07-16 17:30:00"],min:"0",max:"900"},effiResultData:[],allResultData:[],queryList:[],hist:{show:!1,num:10,xName:"区间",yName:"频次"},merge:{show:!1},queryModel:{machine:"",start_date:"",intervals:"",days:0,variables:"",recipe:""},machine_list:[{value:"1",label:"1号机台"},{value:"2",label:"2号机台"},{value:"3",label:"3号机台"},{value:"4",label:"4号机台"}],screenWidth:document.body.clientWidth,effiChartOption:{},allChartOption:{},histTableData:[],variableData:[],date_shortcut:{shortcuts:[{text:"最近一周",onClick:function(t){var a=new Date,e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",[e,a])}},{text:"最近一个月",onClick:function(t){var a=new Date,e=new Date;e.setTime(e.getTime()-2592e6),t.$emit("pick",[e,a])}},{text:"最近三个月",onClick:function(t){var a=new Date,e=new Date;e.setTime(e.getTime()-7776e6),t.$emit("pick",[e,a])}}]}}},computed:{ifScreenUnXl:function(){return this.screenWidth>1900},effiHistoryData:function(){return this.effiHistoryOptionData.map(function(t,a){return{index:a,data:t}})},effiCustomData:function(){return this.effiCustomOptionData.map(function(t,a){return{index:a,data:t.data,name:t.name}})},allHistoryData:function(){return this.allHistoryOptionData.map(function(t,a){return{index:a,data:t}})},allCustomData:function(){return this.allCustomOptionData.map(function(t,a){return{index:a,data:t.data,name:t.name}})}},beforeMount:function(){var t=this.$store.state.tagsView.visitedViews,a=navigator.userAgent,e=!a.match(/(iPad).*OS\s([\d_]+)/)&&a.match(/(iPhone\sOS)\s([\d_]+)/),i=a.match(/(Android)\s+([\d.]+)/);if(e||i){for(var l in t)"Efficiency"===t[l].name&&this.$store.dispatch("delView",t[l]).then();this.$router.push({path:"/analysis/efficiency_m"})}else this.getChartData("effiFirst"),this.getChartData("effiSecond"),this.getCustomOption("effiFirst"),this.getCustomOption("effiSecond"),this.getVariableData()},mounted:function(){var t=this;window.onresize=function(){return window.screenWidth=document.body.clientWidth,void(t.screenWidth=window.screenWidth)}},methods:{forceChange:function(){this.$forceUpdate()},headClearClick:function(t){if("effiFirst"===this.activeName){if(2===this.headDataEffi.toString().split("[object").length)return;this.headDataEffi[t]=void 0,this.effiResultData[t]=void 0}else{if(2===this.headDataAll.toString().split("[object").length)return;this.headDataAll[t]=void 0,this.allResultData[t]=void 0}this.makeChart(),this.$forceUpdate()},headConfirmClick:function(t){var a=void 0,e=void 0;if("effiFirst"===this.activeName){a="effiFirst";var i=this.headDataEffi[t],n={method:"any",query:{machine:i.machine,start_date:i.start_date,days:this.effiChartUtilData.days,variables:this.effiChartUtilData.variables,recipe:this.effiChartUtilData.recipe,intervals:i.intervals[0]+":00-"+i.intervals[1]+":00"}};this.getEffiData(n,t),n.query.alias=i.alias,e=l()(n.query)}else{a="effiSecond";var s=this.headDataAll[t],r={method:"getdata",query:{machine:s.machine,min:parseInt(s.min),max:parseInt(s.max),start:s.interval[0],end:s.interval[1],type:this.allChartUtilData.type}};e=l()(r.query),this.getEffiData(r,t)}this.setChartData({key:a,params:e})},addSelectClick:function(){if("effiFirst"===this.activeName){this.dataModel.id=this.selectID;var t=JSON.parse(l()(this.dataModel));this.headDataEffi[this.dataModel.id]=t}else{this.dataModelAll.id=this.selectID;var a=JSON.parse(l()(this.dataModelAll));this.headDataAll[this.dataModelAll.id]=a}this.selectID++,this.$forceUpdate()},getEffiData:function(t,a){var e=this;Object(n.e)("any",t).then(function(t){"effiFirst"===e.activeName?e.effiResultData[a]=t.data.data:e.allResultData[a]=t.data.data,e.loading=!1,e.$message({message:"数据加载成功!",type:"success"}),e.makeChart()}).catch(function(t){console.log(t),e.$message({message:"request failed",type:"error"}),e.laoding=!1})},getVariableData:function(){var t=this;Object(n.j)({method:"read",query:{page:1,limit:999}}).then(function(a){var e=a.data.data.results;for(var i in t.variableOptionData=[],t.baseVariableData.total=0,t.baseVariableData.data=[],t.analysisVariableData.total=0,t.analysisVariableData.data=[],e)e[i].edit=!1,e[i].original=JSON.parse(l()(e[i])),"basic"===e[i].type?(t.baseVariableData.data.push(e[i]),t.baseVariableData.total++,t.variableOptionData.push({key:e[i].id,label:e[i].content,val:e[i].name})):(t.variableOptionData.push({key:e[i].id,label:e[i].name,val:e[i].content}),t.analysisVariableData.total++,t.analysisVariableData.data.push(e[i]));t.baseVariableData.data.length>5&&(t.baseVariableData.data=t.baseVariableData.data.slice(5*t.baseVariableData.currentPage-5,5*t.baseVariableData.currentPage)),t.analysisVariableData.data.length>5&&(t.analysisVariableData.data=t.analysisVariableData.data.slice(5*t.analysisVariableData.currentPage-5,5*t.analysisVariableData.currentPage)),t.loading=!1,t.$message({message:"数据加载成功!",type:"success"})}).catch(function(a){console.log(a),t.$message({message:"request failed",type:"error"}),t.laoding=!1})},makeChartClick:function(){if("effiFirst"===this.activeName)for(var t in this.headDataEffi)this.headDataEffi[t]&&this.headConfirmClick(this.headDataEffi[t].id);else for(var a in this.headDataAll)this.headDataAll[a]&&this.headConfirmClick(this.headDataAll[a].id)},makeChart:function(){var t=this,a=[],e=void 0,i={data:[]},n={type:"category",data:[],boundaryGap:!0,axisLabel:{rotate:45}},s={};if("effiFirst"===this.activeName){e=this.effiChartUtilData;var r=this.effiResultData,o=this.headDataEffi;if(this.merge.show){var c={name:"",type:"line",data:[]};for(var d in r)for(var h in r[d]){var f=o[d].alias?h+" | "+o[d].alias:h+" | "+o[d].id;n.data.push(f),n.data.sort(function(t,a){var e=t.split(" | ")[0],i=a.split(" | ")[0];return e===i?t.split(" | ")[1]>a.split(" | ")[1]:new Date(e)-new Date(i)}),c.data[n.data.indexOf(f)]=r[d][h]}a.push(c)}else{for(var u in r){var p={name:"",type:"line",connectNulls:!0,data:[]};for(var m in r[u])-1===n.data.indexOf(m)&&n.data.push(m),p.data.push([m,r[u][m]]);if(void 0!==r[u]){var v=this.headDataEffi[u].alias?this.headDataEffi[u].alias:u.toString();i.data.push(v),p.name=v,p.id=u}a.push(p)}n.data.sort()}}else{e=this.allChartUtilData;var b=this.allResultData,g=[],_=[];this.histTableData=[];var y=[];for(var C in b){var D={name:"",data:[]};for(var w in b[C])D.data.push(b[C][w]);D.name=C.toString(),y.push(D)}for(var k in y)y[k].data.length>0&&function(){var a=JSON.parse(l()(y[k].data)),e=function(t,a){return t+a},i=a.reduce(e)/a.length,n=a.map(function(t){return t-i}),s=Math.sqrt(n.map(function(t){return t*t}).reduce(e)/(a.length-1)),r=Math.max.apply(null,a),o=Math.min.apply(null,a);g.push(Math.round(i+3*s)),_.push(Math.round(i-3*s));a.sort(function(t,a){return t<a?-1:t>a?1:0}),a.length%2==0&&(a[a.length/2],a[a.length/2+1]),a.length%2!=0&&a[(a.length+1)/2];var c=function(t,a){var e=((t=t.sort()).length-1)*a,i=Math.floor(e),l=e-i;return void 0!==t[i+1]?t[i]+l*(t[i+1]-t[i]):t[i]},d=c(a,.25),h=c(a,.75);t.histTableData.push({ID:y[k].name,min:o,max:r,mean:i.toPrecision(6),"25%":d,"75%":h,stddev:s.toPrecision(6),cpk:Math.min((r-i)/(3*s),(i-o)/(3*s)).toPrecision(6)})}();if(this.hist.show){for(var x=[],O=Math.max.apply(null,g),S=Math.min.apply(null,_),N=Math.floor((O-S)/this.hist.num),U=0;U<this.hist.num;U++)x.push(0),n.data.push(S+U*N+"～"+((U+1)*N+S));for(var V in b){var $=x.slice(),M={name:"",type:"bar",barWidth:"100%",stack:"hist",data:[],label:{normal:{show:!0,position:"top"}}};for(var E in b[V])$[Math.floor((b[V][E]-S)/N)]++;for(var J in M.name=V.toString(),void 0!==b[V]&&i.data.push(V.toString()),$)0===$[J]&&($[J]=void 0);M.data=$,a.push(M)}}else for(var A in b){var I=1,H={name:"",type:"line",connectNulls:!0,data:[]};for(var T in b[A])-1===n.data.indexOf(I)&&n.data.push(I),H.data.push(b[A][T]),I++;H.name=A.toString(),void 0!==b[A]&&i.data.push(A.toString()),a.push(H)}}n.name=e.xName,s.name=e.yName;var j={title:{text:e.title||"Chart"},tooltip:{},xAxis:n,yAxis:s,grid:{bottom:100},series:a,legend:i,dataZoom:[{type:"slider",xAxisIndex:0},{type:"slider",yAxisIndex:0,filterMode:"empty"},{type:"inside",xAxisIndex:0,filterMode:"empty"}],toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}}};"effiFirst"===this.activeName?this.effiChartOption=j:this.allChartOption=j,this.$forceUpdate()},effiClick:function(t,a,e){console.log(this.headDataEffi),this.activeName="effiSecond",this.dataModelAll.id=this.selectID;var i=this.headDataEffi[t.seriesId],n=JSON.parse(l()(this.dataModelAll));n.interval[0]=t.name+" "+i.intervals[0]+":00",n.interval[1]=t.name+" "+i.intervals[1]+":00",n.machine=i.machine,0===this.allResultData.length&&(this.headDataAll=[]),this.headDataAll[this.dataModelAll.id]=n,this.$forceUpdate(),this.headConfirmClick(this.dataModelAll.id),this.selectID++},getChartData:function(t){var a=window.localStorage;a.getItem(t)||a.setItem(t,"[]");var e=JSON.parse(a.getItem(t));"effiFirst"===t?this.effiHistoryOptionData=e:(console.log(e),this.allHistoryOptionData=e)},setChartData:function(t){var a=window.localStorage,e=JSON.parse(a.getItem(t.key));10===e.length&&e.pop(),e.unshift(t.params),a.setItem(t.key,l()(e)),this.getChartData(t.key)},histChange:function(){this.makeChart()},closeLeftCard:function(){this.leftCardStyle.width="1%",this.leftCardOpen=!1},openLeftCard:function(){this.leftCardStyle.width="20%",this.leftCardOpen=!0},effiHistoryClick:function(t){console.log(t);var a=JSON.parse(t.row.data);this.dataModel.id=this.selectID;var e=JSON.parse(l()(this.dataModel));e.machine=a.machine,e.start_date=a.start_date,e.intervals=a.intervals.split("-"),e.intervals[0]=e.intervals[0].slice(0,5),e.intervals[1]=e.intervals[1].slice(0,5),e.alias=a.alias,this.headDataEffi[this.dataModel.id]=e,this.selectID++,this.$forceUpdate()},allHistoryClick:function(t){console.log(t);var a=JSON.parse(t.row.data);this.dataModelAll.id=this.selectID;var e=JSON.parse(l()(this.dataModelAll));e.machine=a.machine,e.min=a.min,e.max=a.max,e.start=a.start,e.end=a.end,this.headDataAll[this.dataModelAll.id]=e,this.selectID++,this.$forceUpdate()},effiMergeChange:function(){this.makeChart()},headCustomClick:function(t){var a=this;this.$prompt("请输入名称",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入内容有误！"}).then(function(e){var i=e.value;a.setCustomOption(t,i)}).catch(function(){})},getCustomOption:function(t){var a=this;Object(n.a)({method:"read",query:{page:1,limit:10,key_name:[t],order:["updated_at","DESC"]}}).then(function(e){"effiFirst"===t?a.effiCustomOptionData=e.data.data.results:a.allCustomOptionData=e.data.data.results})},setCustomOption:function(t,a){console.log(a);var e=this,i=this.activeName,s=void 0,r=void 0;"effiFirst"===i?(s=this.headDataEffi,(r=JSON.parse(l()(s[t]))).intervals=r.intervals[0]+":00-"+r.intervals[1]+":00"):(s=this.headDataAll,r=JSON.parse(l()(s[t]))),Object(n.a)({method:"create",query:{key_name:i,data:l()(r),name:a}}).then(function(){e.$message("保存成功！"),e.getCustomOption(i)}).catch(function(t){console.log("数据上传失败"+t)})},cellEditClick:function(t){console.log(t)},cellDeleteClick:function(t){},bvhandleCurrentChange:function(t){this.baseVariableData.currentPage=t,this.getVariableData()},avhandleCurrentChange:function(t){this.analysisVariableData.currentPage=t,this.getVariableData()},cancelEdit:function(t,a){t[a]=t.original[a],t.edit=!1,this.$message({message:"取消编辑",type:"warning"})},confirmEdit:function(t,a){t.edit=!1,t.original[a]=t[a],this.$message({message:"The title has been edited",type:"success"})}}}),o=(e("VcRc"),e("KHd+")),c=Object(o.a)(r,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-tabs",{attrs:{id:"efficiency"},model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"分段计算",name:"effiFirst"}},[e("el-container",[e("el-dialog",{attrs:{visible:t.variableDialogVisible,top:"10vh",title:"变量管理"},on:{"update:visible":function(a){t.variableDialogVisible=a}}},[e("div",{staticClass:"dialog-table-title"},[t._v("基本变量")]),t._v(" "),e("el-table",{attrs:{data:t.baseVariableData.data,border:"",fit:"","highlight-current-row":""}},[e("el-table-column",{attrs:{property:"name",label:"标识"}}),t._v(" "),e("el-table-column",{attrs:{property:"content",label:"自定义变量名"}}),t._v(" "),e("el-table-column",{attrs:{property:"description",label:"描述"}}),t._v(" "),e("el-table-column",{attrs:{"min-width":"300px",label:"Title"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.edit?[e("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:a.row.description,callback:function(e){t.$set(a.row,"description",e)},expression:"scope.row.description"}}),t._v(" "),e("el-button",{staticClass:"cancel-btn",attrs:{size:"small",icon:"el-icon-refresh",type:"warning"},on:{click:function(e){t.cancelEdit(a.row,"description")}}},[t._v("cancel")])]:e("span",[t._v(t._s(a.row.description))])]}}])}),t._v(" "),e("el-table-column",{attrs:{align:"center",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.edit?e("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-circle-check-outline"},on:{click:function(e){t.confirmEdit(a.row,"description")}}},[t._v("Ok")]):e("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){a.row.edit=!a.row.edit}}},[t._v("Edit")])]}}])})],1),t._v(" "),e("el-pagination",{attrs:{"page-size":5,total:t.baseVariableData.total,"current-page":t.baseVariableData.currentPage,layout:"total, prev, pager, next"},on:{"current-change":t.bvhandleCurrentChange}}),t._v(" "),e("div",{staticClass:"dialog-table-title",staticStyle:{"margin-top":"40px"}},[t._v("分析变量"),e("el-button",{staticStyle:{float:"right","margin-bottom":"5px"},attrs:{icon:"el-icon-plus",circle:""}})],1),t._v(" "),e("el-table",{attrs:{data:t.analysisVariableData.data,border:"",fit:"","highlight-current-row":""}},[e("el-table-column",{attrs:{property:"name",label:"标识"}}),t._v(" "),e("el-table-column",{attrs:{property:"content",label:"表达式"}}),t._v(" "),e("el-table-column",{attrs:{property:"description",label:"描述"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.edit?e("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-circle-check-outline"},on:{click:function(e){t.confirmEdit(a.row,"description")}}},[t._v("Ok")]):e("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){a.row.edit=!a.row.edit}}},[t._v("Edit")]),t._v(" "),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.cellDeleteClick(a)}}},[t._v("删除")])]}}])})],1),t._v(" "),e("el-pagination",{attrs:{"page-size":5,total:t.analysisVariableData.total,"current-page":t.analysisVariableData.currentPage,layout:"total, prev, pager, next"},on:{"current-change":t.avhandleCurrentChange}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.dialogVisible=!1}}},[t._v("关 闭")])],1)],1),t._v(" "),e("el-header",{staticClass:"contain-header"},[e("el-card",{staticClass:"box-card",staticStyle:{"text-align":"center"}},[e("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(a){t.makeChartClick()}}},[t._v("绘制图表")]),t._l(t.headDataEffi,function(a){return void 0!=a?e("el-row",{key:a.id,staticClass:"head-row",attrs:{name:a.id}},[e("el-col",{staticClass:"head-label",attrs:{span:.5}},[t._v(t._s(a.id)+" | ")]),t._v(" "),e("el-col",{directives:[{name:"show",rawName:"v-show",value:t.ifScreenUnXl,expression:"ifScreenUnXl"}],staticClass:"head-label",attrs:{span:1.5}},[t._v("选择机器：")]),t._v(" "),e("el-col",{attrs:{sm:4,xl:3}},[e("el-select",{attrs:{placeholder:"请选择机器"},on:{change:function(a){t.forceChange()}},model:{value:a.machine,callback:function(e){t.$set(a,"machine",e)},expression:"event.machine"}},t._l(t.machine_list,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),e("el-col",{directives:[{name:"show",rawName:"v-show",value:t.ifScreenUnXl,expression:"ifScreenUnXl"}],staticClass:"head-label",attrs:{span:1.5,"hidden-lg-and-down":""}},[t._v("选择日期：")]),t._v(" "),e("el-col",{attrs:{sm:5,xl:4}},[e("el-date-picker",{attrs:{type:"date",multiple:"","value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{input:function(a){t.forceChange()}},model:{value:a.start_date,callback:function(e){t.$set(a,"start_date",e)},expression:"event.start_date"}})],1),t._v(" "),e("el-col",{directives:[{name:"show",rawName:"v-show",value:t.ifScreenUnXl,expression:"ifScreenUnXl"}],staticClass:"head-label",attrs:{span:1.5}},[t._v("选择时间：")]),t._v(" "),e("el-col",{attrs:{sm:5,xl:4}},[e("el-time-picker",{staticStyle:{width:"200px"},attrs:{"is-range":"","range-separator":"—","start-placeholder":"开始时间","end-placeholder":"结束时间",format:"HH:mm","value-format":"HH:mm",placeholder:"选择时间范围"},on:{input:function(a){t.forceChange()}},model:{value:a.intervals,callback:function(e){t.$set(a,"intervals",e)},expression:"event.intervals"}})],1),e("el-col",{attrs:{sm:2,xl:3}},[e("el-input",{attrs:{placeholder:"别名"},on:{change:function(a){t.forceChange()}},model:{value:a.alias,callback:function(e){t.$set(a,"alias",e)},expression:"event.alias"}})],1),t._v(" "),e("el-col",{attrs:{sm:44,xl:3}},[e("el-button",{staticClass:"head-btn",attrs:{disabled:2===t.headDataEffi.toString().split("[object").length,type:"warning",plain:""},on:{click:function(e){t.headClearClick(a.id)}}},[t._v("清除")]),e("el-button",{staticClass:"head-btn",attrs:{type:"primary",plain:""},on:{click:function(e){t.headCustomClick(a.id)}}},[t._v("保存")])],1)],1):t._e()}),e("el-button",{staticClass:"head-add-btn",attrs:{icon:"el-icon-plus",type:"primary",circle:""},on:{click:function(a){t.addSelectClick()}}})],2)],1),t._v(" "),e("el-main",[e("div",{staticClass:"main-left",style:t.leftCardStyle},[t.leftCardOpen?e("el-button",{class:t.leftBtnClass.open,attrs:{type:"primary",icon:"el-icon-d-arrow-left",plain:"",circle:""},on:{click:function(a){t.closeLeftCard()}}}):t._e(),t._v(" "),t.leftCardOpen?t._e():e("el-button",{class:t.leftBtnClass.close,attrs:{type:"primary",icon:"el-icon-d-arrow-right",plain:"",circle:""},on:{click:function(a){t.openLeftCard()}}}),t._v(" "),e("el-card",[e("el-tabs",{model:{value:t.effiOptionTabs,callback:function(a){t.effiOptionTabs=a},expression:"effiOptionTabs"}},[e("el-tab-pane",{attrs:{label:"通用配置",name:"utilOption"}},[e("el-form",[e("el-form-item",{attrs:{label:"图表名称"}},[e("el-input",{model:{value:t.effiChartUtilData.title,callback:function(a){t.$set(t.effiChartUtilData,"title",a)},expression:"effiChartUtilData.title"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"横坐标名称"}},[e("el-input",{model:{value:t.effiChartUtilData.xName,callback:function(a){t.$set(t.effiChartUtilData,"xName",a)},expression:"effiChartUtilData.xName"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"纵坐标名称"}},[e("el-input",{model:{value:t.effiChartUtilData.yName,callback:function(a){t.$set(t.effiChartUtilData,"yName",a)},expression:"effiChartUtilData.yName"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"合并显示"}},[e("el-switch",{attrs:{"active-color":"#13ce66"},on:{change:t.effiMergeChange},model:{value:t.merge.show,callback:function(a){t.$set(t.merge,"show",a)},expression:"merge.show"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"计算周期"}},[e("el-input",{on:{change:t.forceChange},model:{value:t.effiChartUtilData.days,callback:function(a){t.$set(t.effiChartUtilData,"days",a)},expression:"effiChartUtilData.days"}},[e("template",{slot:"append"},[t._v("天")])],2)],1),t._v(" "),e("el-form-item",{attrs:{label:"分析条件"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:t.effiChartUtilData.recipe,callback:function(a){t.$set(t.effiChartUtilData,"recipe",a)},expression:"effiChartUtilData.recipe"}},t._l(t.variableOptionData,function(t){return e("el-option",{key:t.key,attrs:{label:t.label,value:t.val}})}))],1),t._v(" "),e("el-form-item",[e("el-button",{on:{click:function(a){t.variableDialogVisible=!0}}},[t._v("变量管理")])],1)],1)],1),t._v(" "),e("el-tab-pane",{attrs:{label:"最近参数",name:"historyOption"}},[e("el-table",{attrs:{data:t.effiHistoryData}},[e("el-table-column",{attrs:{prop:"data",label:"参数内容"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-popover",{attrs:{placement:"right",trigger:"hover"}},[e("ul",[e("p",[e("b",[t._v("机器：")]),t._v(t._s(JSON.parse(a.row.data).machine))]),t._v(" "),e("p",[e("b",[t._v("日期：")]),t._v(t._s(JSON.parse(a.row.data).start_date))]),t._v(" "),e("p",[e("b",[t._v("时间：")]),t._v(t._s(JSON.parse(a.row.data).intervals))]),t._v(" "),e("p",[e("b",[t._v("别名：")]),t._v(t._s(JSON.parse(a.row.data).alias))])]),t._v(" "),e("p",{staticStyle:{height:"36px"},attrs:{slot:"reference"},on:{click:function(e){t.effiHistoryClick(a)}},slot:"reference"},[t._v(t._s(a.row.data))])])]}}])})],1)],1),t._v(" "),e("el-tab-pane",{attrs:{label:"自定义参数",name:"customOption"}},[e("el-table",{attrs:{data:t.effiCustomData}},[e("el-table-column",{attrs:{prop:"data",label:"参数内容"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-popover",{attrs:{placement:"right",trigger:"hover"}},[e("ul",[e("p",[e("b",[t._v("机器：")]),t._v(t._s(JSON.parse(a.row.data).machine))]),t._v(" "),e("p",[e("b",[t._v("日期：")]),t._v(t._s(JSON.parse(a.row.data).start_date))]),t._v(" "),e("p",[e("b",[t._v("时间：")]),t._v(t._s(JSON.parse(a.row.data).intervals))]),t._v(" "),e("p",[e("b",[t._v("别名：")]),t._v(t._s(JSON.parse(a.row.data).alias))])]),t._v(" "),e("el-button",{staticStyle:{height:"36px"},attrs:{slot:"reference"},on:{click:function(e){t.effiHistoryClick(a)}},slot:"reference"},[t._v(t._s(a.row.name))])],1)]}}])})],1)],1)],1)],1)],1),e("div",{staticClass:"main-main"},[e("IEcharts",{key:"effiChart",ref:"ieCharts",attrs:{option:t.effiChartOption},on:{click:t.effiClick}})],1)])],1)],1),t._v(" "),e("el-tab-pane",{attrs:{lazy:!0,label:"整体绘制",name:"effiSecond"}},[e("el-container",[e("el-header",{staticClass:"contain-header"},[e("el-card",{staticClass:"box-card",staticStyle:{"text-align":"center"}},[e("div",{staticClass:"head-right-control"},[e("el-row",[e("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(a){t.makeChartClick()}}},[t._v("绘制图表")])],1),t._v(" "),e("el-row")],1),t._v(" "),t._l(t.headDataAll,function(a){return void 0!=a?e("el-row",{key:a.id,staticClass:"head-row",attrs:{name:a.id}},[e("el-col",{staticClass:"head-label",attrs:{span:.5}},[t._v(t._s(a.id)+" | ")]),t._v(" "),e("el-col",{directives:[{name:"show",rawName:"v-show",value:t.ifScreenUnXl,expression:"ifScreenUnXl"}],staticClass:"head-label",attrs:{span:1.5}},[t._v("选择机器：")]),t._v(" "),e("el-col",{attrs:{sm:4,xl:3}},[e("el-select",{attrs:{placeholder:"请选择机器"},on:{change:function(a){t.forceChange()}},model:{value:a.machine,callback:function(e){t.$set(a,"machine",e)},expression:"event.machine"}},t._l(t.machine_list,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),e("el-col",{directives:[{name:"show",rawName:"v-show",value:t.ifScreenUnXl,expression:"ifScreenUnXl"}],staticClass:"head-label",attrs:{span:1.5}},[t._v("选择时间：")]),t._v(" "),e("el-col",{attrs:{sm:9,xl:7}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":t.date_shortcut,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","range-separator":"至","start-placeholder":"开始","end-placeholder":"结束",align:"right"},on:{input:function(a){t.forceChange()}},model:{value:a.interval,callback:function(e){t.$set(a,"interval",e)},expression:"event.interval"}})],1),t._v(" "),e("el-col",{directives:[{name:"show",rawName:"v-show",value:t.ifScreenUnXl,expression:"ifScreenUnXl"}],staticClass:"head-label",attrs:{span:1.5}},[t._v("最小值：")]),t._v(" "),e("el-col",{attrs:{sm:2,xl:2}},[e("el-input",{attrs:{placeholder:"最小值"},on:{change:function(a){t.forceChange()}},model:{value:a.min,callback:function(e){t.$set(a,"min",e)},expression:"event.min"}})],1),t._v(" "),e("el-col",{directives:[{name:"show",rawName:"v-show",value:t.ifScreenUnXl,expression:"ifScreenUnXl"}],staticClass:"head-label",attrs:{span:1.5}},[t._v("最大值：")]),t._v(" "),e("el-col",{attrs:{sm:2,xl:2}},[e("el-input",{attrs:{placeholder:"最大值"},on:{change:function(a){t.forceChange()}},model:{value:a.max,callback:function(e){t.$set(a,"max",e)},expression:"event.max"}})],1),t._v(" "),e("el-col",{attrs:{sm:4,xl:3}},[e("el-button",{staticClass:"head-btn",attrs:{disabled:2===t.headDataAll.toString().split("[object").length,type:"warning",plain:""},on:{click:function(e){t.headClearClick(a.id)}}},[t._v("清除")]),e("el-button",{staticClass:"head-btn",attrs:{type:"primary",plain:""},on:{click:function(e){t.headCustomClick(a.id)}}},[t._v("保存")])],1)],1):t._e()}),e("el-button",{staticClass:"head-add-btn",attrs:{icon:"el-icon-plus",type:"primary",circle:""},on:{click:function(a){t.addSelectClick()}}})],2)],1),t._v(" "),e("el-main",[e("div",{staticClass:"main-left",style:t.leftCardStyle},[t.leftCardOpen?t._e():e("el-button",{class:t.leftBtnClass.close,attrs:{type:"primary",icon:"el-icon-d-arrow-right",plain:"",circle:""},on:{click:function(a){t.openLeftCard()}}}),t._v(" "),t.leftCardOpen?e("el-button",{class:t.leftBtnClass.open,attrs:{type:"primary",icon:"el-icon-d-arrow-left",plain:"",circle:""},on:{click:function(a){t.closeLeftCard()}}}):t._e(),t._v(" "),e("el-card",[e("el-tabs",{model:{value:t.allOptionTabs,callback:function(a){t.allOptionTabs=a},expression:"allOptionTabs"}},[e("el-tab-pane",{attrs:{label:"通用配置",name:"utilOption"}},[e("el-form",[e("el-form-item",{attrs:{label:"图表名称"}},[e("el-input",{model:{value:t.allChartUtilData.title,callback:function(a){t.$set(t.allChartUtilData,"title",a)},expression:"allChartUtilData.title"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"横坐标名称"}},[e("el-input",{model:{value:t.allChartUtilData.xName,callback:function(a){t.$set(t.allChartUtilData,"xName",a)},expression:"allChartUtilData.xName"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"纵坐标名称"}},[e("el-input",{model:{value:t.allChartUtilData.yName,callback:function(a){t.$set(t.allChartUtilData,"yName",a)},expression:"allChartUtilData.yName"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"选择类型"}},[e("el-select",{model:{value:t.allChartUtilData.type,callback:function(a){t.$set(t.allChartUtilData,"type",a)},expression:"allChartUtilData.type"}},[e("el-option",{attrs:{value:"pace",label:"节拍时间"}}),e("el-option",{attrs:{value:"cycle",label:"程序时间"}})],1)],1),t._v(" "),e("el-form-item",{attrs:{label:"显示直方图"}},[e("el-switch",{attrs:{"active-color":"#13ce66"},on:{change:t.histChange},model:{value:t.hist.show,callback:function(a){t.$set(t.hist,"show",a)},expression:"hist.show"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"直方图区间数量"}},[e("el-input",{on:{change:t.histChange},model:{value:t.hist.num,callback:function(a){t.$set(t.hist,"num",a)},expression:"hist.num"}})],1)],1)],1),t._v(" "),e("el-tab-pane",{attrs:{label:"最近参数",name:"historyOption"}},[e("el-table",{attrs:{data:t.allHistoryData}},[e("el-table-column",{attrs:{prop:"data",label:"参数内容"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-popover",{attrs:{placement:"right",trigger:"hover"}},[e("ul",[e("p",[e("b",[t._v("机器：")]),t._v(t._s(JSON.parse(a.row.data).machine))]),t._v(" "),e("p",[e("b",[t._v("最小值：")]),t._v(t._s(JSON.parse(a.row.data).min))]),t._v(" "),e("p",[e("b",[t._v("最大值：")]),t._v(t._s(JSON.parse(a.row.data).max))]),t._v(" "),e("p",[e("b",[t._v("时间：")]),t._v(t._s(JSON.parse(a.row.data).start)+"-"+t._s(JSON.parse(a.row.data).end))])]),t._v(" "),e("p",{staticStyle:{height:"36px"},attrs:{slot:"reference"},on:{click:function(e){t.allHistoryClick(a)}},slot:"reference"},[t._v(t._s(a.row.data))])])]}}])})],1)],1),t._v(" "),e("el-tab-pane",{attrs:{label:"自定义参数",name:"customOption"}},[e("el-table",{attrs:{data:t.allCustomData}},[e("el-table-column",{attrs:{prop:"data",label:"参数内容"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-popover",{attrs:{placement:"right",trigger:"hover"}},[e("ul",[e("p",[e("b",[t._v("机器：")]),t._v(t._s(JSON.parse(a.row.data).machine))]),t._v(" "),e("p",[e("b",[t._v("最小值：")]),t._v(t._s(JSON.parse(a.row.data).min))]),t._v(" "),e("p",[e("b",[t._v("最大值：")]),t._v(t._s(JSON.parse(a.row.data).max))]),t._v(" "),e("p",[e("b",[t._v("时间：")]),t._v(t._s(JSON.parse(a.row.data).interval))])]),t._v(" "),e("el-button",{staticStyle:{height:"36px"},attrs:{slot:"reference"},on:{click:function(e){t.allHistoryClick(a)}},slot:"reference"},[t._v(t._s(a.row.name))])],1)]}}])})],1)],1)],1)],1)],1),e("div",{staticClass:"main-main"},[e("IEcharts",{key:"allChart",staticStyle:{width:"100%",height:"100%"},attrs:{"auto-resize":!0,option:t.allChartOption}}),e("el-table",{staticStyle:{"margin-left":"10px"},attrs:{data:t.histTableData,border:""}},[e("el-table-column",{attrs:{prop:"ID",label:"序号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"min",label:"最小值"}}),t._v(" "),e("el-table-column",{attrs:{prop:"max",label:"最大值"}}),t._v(" "),e("el-table-column",{attrs:{prop:"mean",label:"平均值"}}),t._v(" "),e("el-table-column",{attrs:{prop:"25%",label:"25%"}}),t._v(" "),e("el-table-column",{attrs:{prop:"75%",label:"75%"}}),t._v(" "),e("el-table-column",{attrs:{prop:"cpk",label:"CPK"}}),t._v(" "),e("el-table-column",{attrs:{prop:"stddev",label:"标准差"}})],1)],1)])],1)],1)],1)},[],!1,null,"77fb236a",null);c.options.__file="efficiency.vue";a.default=c.exports},"S/Jn":function(t,a,e){},U7nq:function(t,a,e){"use strict";e.d(a,"b",function(){return m}),e.d(a,"e",function(){return v}),e.d(a,"j",function(){return b}),e.d(a,"d",function(){return g}),e.d(a,"f",function(){return _}),e.d(a,"c",function(){return y}),e.d(a,"h",function(){return C}),e.d(a,"a",function(){return D}),e.d(a,"g",function(){return w}),e.d(a,"i",function(){return k});var i=e("t3Un"),l="/datatable",n="/analysis",s="/analysis/variable",r="/production/plan",o="/role",c="/user/list",d="http://www.bivrost.cn",h="/production/product",f="/production/group",u="/user",p="/chartdata";function m(t){return Object(i.a)({url:d+l,method:"get",params:t})}function v(t,a){return Object(i.a)({url:d+n,method:"post",data:a})}function b(t){return Object(i.a)({url:d+s,method:"post",data:t})}function g(t){return Object(i.a)({url:d+r,method:"post",data:t})}function _(t){return Object(i.a)({url:d+h,method:"post",data:t})}function y(t){return Object(i.a)({url:d+f,method:"post",data:t})}function C(t){return Object(i.a)({url:d+u,method:"post",data:t})}function D(t){return Object(i.a)({url:d+p,method:"post",data:t})}function w(t){return Object(i.a)({url:d+o,method:"post",data:t})}function k(t){return Object(i.a)({url:d+c,method:"post",data:t})}},VcRc:function(t,a,e){"use strict";var i=e("S/Jn");e.n(i).a},"gDS+":function(t,a,e){t.exports={default:e("oh+g"),__esModule:!0}},"oh+g":function(t,a,e){var i=e("WEpk"),l=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return l.stringify.apply(l,arguments)}}}]);