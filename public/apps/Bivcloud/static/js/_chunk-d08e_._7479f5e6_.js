(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-d08e"],{"E/uM":function(e,t,a){"use strict";var l=a("leXa");a.n(l).a},U7nq:function(e,t,a){"use strict";a.d(t,"b",function(){return h}),a.d(t,"e",function(){return u}),a.d(t,"d",function(){return p}),a.d(t,"f",function(){return m}),a.d(t,"c",function(){return v}),a.d(t,"g",function(){return C}),a.d(t,"a",function(){return b});var l=a("t3Un"),i="/datatable",n="/plot",s="/production/plan",r="http://www.bivrost.cn",o="/production/product",c="/production/group",d="/user",f="/chartdata";function h(e){return Object(l.a)({url:r+i+"getStats",method:"post",params:e})}function u(e,t){return Object(l.a)({url:r+n,method:"post",data:t})}function p(e){return Object(l.a)({url:r+s,method:"post",data:e})}function m(e){return Object(l.a)({url:r+o,method:"post",data:e})}function v(e){return Object(l.a)({url:r+c,method:"post",data:e})}function C(e){return Object(l.a)({url:r+d,method:"post",data:e})}function b(e){return Object(l.a)({url:r+f,method:"post",data:e})}},"gDS+":function(e,t,a){e.exports={default:a("oh+g"),__esModule:!0}},leXa:function(e,t,a){},"oh+g":function(e,t,a){var l=a("WEpk"),i=l.JSON||(l.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},vwdd:function(e,t,a){"use strict";a.r(t);var l=a("gDS+"),i=a.n(l),n=a("U7nq"),s=a("zkRF"),r=(a("4F9Q"),{name:"Efficiency",components:{IEcharts:s.a},data:function(){return{activeName:"effiFirst",effiChartUtilData:{title:"图表",xName:"日期",yName:"数值",variables:"throughput,elasped,setup,poweroff",recipe:"3600*throughput/(elasped-setup-poweroff)",days:"7"},allChartUtilData:{title:"图表",xName:"次数",yName:"数值",type:"pace"},leftCardStyle:{width:"20%"},leftCardOpen:!0,leftBtnClass:{open:"left-card-switch-open",close:"left-card-switch-close"},selectID:2,headDataEffi:[{id:"0",machine:"1",start_date:"2018-07-18",intervals:["12:00","18:00"],alias:"早"}],headDataAll:[void 0,{id:"1",machine:"1",interval:["2018-07-16 13:30:00","2018-07-16 17:30:00"],min:"0",max:"900"}],dataModel:{id:"",machine:"1",start_date:"2018-07-18",intervals:["12:00","18:00"],alias:"早"},dataModelAll:{id:"",machine:"1",interval:["2018-07-16 13:30:00","2018-07-16 17:30:00"],min:"0",max:"900"},effiResultData:[],allResultData:[],queryList:[],queryModel:{machine:"",start_date:"",intervals:"",days:0,variables:"",recipe:""},machine_list:[{value:"1",label:"1号机台"},{value:"2",label:"2号机台"},{value:"3",label:"3号机台"},{value:"4",label:"4号机台"}],screenWidth:document.body.clientWidth,effiChartOption:{},allChartOption:{},date_shortcut:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},computed:{ifScreenUnXl:function(){return this.screenWidth>1900}},beforeMount:function(){},mounted:function(){var e=this;window.onresize=function(){return window.screenWidth=document.body.clientWidth,void(e.screenWidth=window.screenWidth)}},methods:{forceChange:function(){this.$forceUpdate()},headClearClick:function(e){if("effiFirst"===this.activeName){if(2===this.headDataEffi.toString().split("[object").length)return;this.headDataEffi[e]=void 0,this.effiResultData[e]=void 0,this.makeChart()}else{if(2===this.headDataAll.toString().split("[object").length)return;this.headDataAll[e]=void 0,this.allResultData[e]=void 0,this.makeChart()}this.$forceUpdate()},headConfirmClick:function(e){if("effiFirst"==this.activeName){var t=this.headDataEffi[e],a={method:"any",query:{machine:t.machine,start_date:t.start_date,days:this.effiChartUtilData.days,variables:this.effiChartUtilData.variables,recipe:this.effiChartUtilData.recipe,intervals:t.intervals[0]+":00-"+t.intervals[1]+":00-"+t.alias}};this.getEffiData(a,e)}else{var l=this.headDataAll[e];console.log(l);var i={method:"getdata",query:{machine:l.machine,min:parseInt(l.min),max:parseInt(l.max),start:l.interval[0],end:l.interval[1],type:this.allChartUtilData.type}};this.getEffiData(i,e)}},addSelectClick:function(){if("effiFirst"===this.activeName){this.dataModel.id=this.selectID;var e=JSON.parse(i()(this.dataModel));this.headDataEffi[this.dataModel.id]=e}else{this.dataModelAll.id=this.selectID;var t=JSON.parse(i()(this.dataModelAll));this.headDataAll[this.dataModelAll.id]=t}this.selectID++,this.$forceUpdate()},getEffiData:function(e,t){var a=this;Object(n.e)("any",e).then(function(e){"effiFirst"===a.activeName?a.effiResultData[t]=e.data.data:a.allResultData[t]=e.data.data,a.loading=!1,a.$message({message:"数据加载成功!",type:"success"}),a.makeChart()}).catch(function(e){console.log(e),a.$message({message:"request failed",type:"error"}),a.laoding=!1})},makeChart:function(){var e=[],t=void 0,a={data:[]},l={type:"category",data:[]},i={};if("effiFirst"===this.activeName){t=this.effiChartUtilData;var n=this.effiResultData;for(var s in n){var r={name:"",type:"line",data:[]};for(var o in n[s])-1===l.data.indexOf(o)&&l.data.push(o),r.data.push([o,n[s][o]]);r.name=s.toString(),a.data.push(s.toString()),e.push(r)}}else{t=this.allChartUtilData;var c=this.allResultData;for(var d in c){var f=1,h={name:"",type:"line",data:[]};for(var u in c[d])-1===l.data.indexOf(f)&&l.data.push(f),h.data.push(c[d][u]),f++;h.name=d.toString(),a.data.push(d.toString()),e.push(h)}}l.name=t.xName,i.name=t.yName;var p={title:{text:t.title||"Chart"},tooltip:{},xAxis:l,yAxis:i,series:e,legend:a,dataZoom:[{type:"slider",xAxisIndex:0,filterMode:"empty"},{type:"slider",yAxisIndex:0,filterMode:"empty"},{type:"inside",xAxisIndex:0,filterMode:"empty"}],toolbox:{feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}}};"effiFirst"===this.activeName?this.effiChartOption=p:this.allChartOption=p,this.$forceUpdate()},closeLeftCard:function(){this.leftCardStyle.width="1%",this.leftCardOpen=!1},openLeftCard:function(){this.leftCardStyle.width="20%",this.leftCardOpen=!0}}}),o=(a("E/uM"),a("KHd+")),c=Object(o.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{attrs:{id:"efficiency"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"分段计算",name:"effiFirst"}},[a("el-container",[a("el-header",{staticClass:"contain-header"},[a("el-card",{staticClass:"box-card"},[a("el-button",{staticClass:"head-add-btn",attrs:{type:"primary"},on:{click:function(t){e.addSelectClick()}}},[e._v("新增查询")]),e._l(e.headDataEffi,function(t){return void 0!=t?a("el-row",{key:t.id,staticClass:"head-row",attrs:{name:t.id}},[a("el-col",{staticClass:"head-label",attrs:{span:.5}},[e._v(e._s(t.id)+" | ")]),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.ifScreenUnXl,expression:"ifScreenUnXl"}],staticClass:"head-label",attrs:{span:1.5}},[e._v("选择机器：")]),e._v(" "),a("el-col",{attrs:{sm:4,xl:3}},[a("el-select",{attrs:{placeholder:"请选择机器"},on:{change:function(t){e.forceChange()}},model:{value:t.machine,callback:function(a){e.$set(t,"machine",a)},expression:"event.machine"}},e._l(e.machine_list,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.ifScreenUnXl,expression:"ifScreenUnXl"}],staticClass:"head-label",attrs:{span:1.5,"hidden-lg-and-down":""}},[e._v("选择日期：")]),e._v(" "),a("el-col",{attrs:{sm:5,xl:4}},[a("el-date-picker",{attrs:{type:"date",multiple:"","value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{input:function(t){e.forceChange()}},model:{value:t.start_date,callback:function(a){e.$set(t,"start_date",a)},expression:"event.start_date"}})],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.ifScreenUnXl,expression:"ifScreenUnXl"}],staticClass:"head-label",attrs:{span:1.5}},[e._v("选择时间：")]),e._v(" "),a("el-col",{attrs:{sm:8,xl:6}},[a("el-time-picker",{attrs:{"is-range":"","range-separator":"—","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"HH:mm",placeholder:"选择时间范围"},on:{input:function(t){e.forceChange()}},model:{value:t.intervals,callback:function(a){e.$set(t,"intervals",a)},expression:"event.intervals"}})],1),a("el-col",{attrs:{sm:2,xl:3}},[a("el-input",{attrs:{placeholder:"别名"},on:{change:function(t){e.forceChange()}},model:{value:t.alias,callback:function(a){e.$set(t,"alias",a)},expression:"event.alias"}})],1),e._v(" "),a("el-col",{attrs:{span:1.5}},[a("el-button",{staticClass:"head-btn",attrs:{disabled:!(t.alias&&t.intervals&&t.machine&&t.start_date&&e.effiChartUtilData.variables&&e.effiChartUtilData.recipe&&e.effiChartUtilData.days),type:"info",plain:""},on:{click:function(a){e.headConfirmClick(t.id)}}},[e._v("确认")])],1),e._v(" "),a("el-col",{attrs:{span:1.5}},[a("el-button",{staticClass:"head-btn",attrs:{type:"warning",plain:""},on:{click:function(a){e.headClearClick(t.id)}}},[e._v("清除")])],1)],1):e._e()})],2)],1),e._v(" "),a("el-main",[a("div",{staticClass:"main-left",style:e.leftCardStyle},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("通用配置")])]),e._v(" "),e.leftCardOpen?a("el-button",{class:e.leftBtnClass.open,attrs:{type:"primary",icon:"el-icon-d-arrow-left",plain:"",circle:""},on:{click:function(t){e.closeLeftCard()}}}):e._e(),e._v(" "),e.leftCardOpen?e._e():a("el-button",{class:e.leftBtnClass.close,attrs:{type:"primary",icon:"el-icon-d-arrow-right",plain:"",circle:""},on:{click:function(t){e.openLeftCard()}}}),e._v(" "),a("el-form",[a("el-form-item",{attrs:{label:"图表名称"}},[a("el-input",{model:{value:e.effiChartUtilData.title,callback:function(t){e.$set(e.effiChartUtilData,"title",t)},expression:"effiChartUtilData.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"横坐标名称"}},[a("el-input",{model:{value:e.effiChartUtilData.xName,callback:function(t){e.$set(e.effiChartUtilData,"xName",t)},expression:"effiChartUtilData.xName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"纵坐标名称"}},[a("el-input",{model:{value:e.effiChartUtilData.yName,callback:function(t){e.$set(e.effiChartUtilData,"yName",t)},expression:"effiChartUtilData.yName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"计算变量"}},[a("el-input",{model:{value:e.effiChartUtilData.variables,callback:function(t){e.$set(e.effiChartUtilData,"variables",t)},expression:"effiChartUtilData.variables"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"计算表达式"}},[a("el-input",{model:{value:e.effiChartUtilData.recipe,callback:function(t){e.$set(e.effiChartUtilData,"recipe",t)},expression:"effiChartUtilData.recipe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"计算周期"}},[a("el-input",{on:{change:e.forceChange},model:{value:e.effiChartUtilData.days,callback:function(t){e.$set(e.effiChartUtilData,"days",t)},expression:"effiChartUtilData.days"}},[a("template",{slot:"append"},[e._v("天")])],2)],1)],1)],1)],1),a("div",{staticClass:"main-main"},[a("IEcharts",{key:"effiChart",attrs:{option:e.effiChartOption}})],1)])],1)],1),e._v(" "),a("el-tab-pane",{attrs:{lazy:!0,label:"整体绘制",name:"effiSecond"}},[a("el-container",[a("el-header",{staticClass:"contain-header"},[a("el-card",{staticClass:"box-card"},[a("el-button",{staticClass:"head-add-btn",attrs:{type:"primary"},on:{click:function(t){e.addSelectClick()}}},[e._v("新增查询")]),e._l(e.headDataAll,function(t){return void 0!=t?a("el-row",{key:t.id,staticClass:"head-row",attrs:{name:t.id}},[a("el-col",{staticClass:"head-label",attrs:{span:.5}},[e._v(e._s(t.id)+" | ")]),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.ifScreenUnXl,expression:"ifScreenUnXl"}],staticClass:"head-label",attrs:{span:1.5}},[e._v("选择机器：")]),e._v(" "),a("el-col",{attrs:{sm:4,xl:3}},[a("el-select",{attrs:{placeholder:"请选择机器"},on:{change:function(t){e.forceChange()}},model:{value:t.machine,callback:function(a){e.$set(t,"machine",a)},expression:"event.machine"}},e._l(e.machine_list,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.ifScreenUnXl,expression:"ifScreenUnXl"}],staticClass:"head-label",attrs:{span:1.5}},[e._v("选择时间：")]),e._v(" "),a("el-col",{attrs:{sm:8,xl:6}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":e.date_shortcut,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","range-separator":"至","start-placeholder":"开始","end-placeholder":"结束",align:"right"},model:{value:t.interval,callback:function(a){e.$set(t,"interval",a)},expression:"event.interval"}})],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.ifScreenUnXl,expression:"ifScreenUnXl"}],staticClass:"head-label",attrs:{span:1.5}},[e._v("最小值：")]),e._v(" "),a("el-col",{attrs:{sm:2,xl:3}},[a("el-input",{attrs:{placeholder:"最小值"},on:{change:function(t){e.forceChange()}},model:{value:t.min,callback:function(a){e.$set(t,"min",a)},expression:"event.min"}})],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.ifScreenUnXl,expression:"ifScreenUnXl"}],staticClass:"head-label",attrs:{span:1.5}},[e._v("最大值：")]),e._v(" "),a("el-col",{attrs:{sm:2,xl:3}},[a("el-input",{attrs:{placeholder:"最大值"},on:{change:function(t){e.forceChange()}},model:{value:t.max,callback:function(a){e.$set(t,"max",a)},expression:"event.max"}})],1),e._v(" "),a("el-col",{attrs:{span:1.5}},[a("el-button",{staticClass:"head-btn",attrs:{disabled:!t.machine||!e.allChartUtilData.type,type:"info",plain:""},on:{click:function(a){e.headConfirmClick(t.id)}}},[e._v("确认")])],1),e._v(" "),a("el-col",{attrs:{span:1.5}},[a("el-button",{staticClass:"head-btn",attrs:{type:"warning",plain:""},on:{click:function(a){e.headClearClick(t.id)}}},[e._v("清除")])],1)],1):e._e()})],2)],1),e._v(" "),a("el-main",[a("div",{staticClass:"main-left",style:e.leftCardStyle},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("通用配置")])]),e._v(" "),e.leftCardOpen?a("el-button",{class:e.leftBtnClass.open,attrs:{type:"primary",icon:"el-icon-d-arrow-left",plain:"",circle:""},on:{click:function(t){e.closeLeftCard()}}}):e._e(),e._v(" "),e.leftCardOpen?e._e():a("el-button",{class:e.leftBtnClass.close,attrs:{type:"primary",icon:"el-icon-d-arrow-right",plain:"",circle:""},on:{click:function(t){e.openLeftCard()}}}),e._v(" "),a("el-form",[a("el-form-item",{attrs:{label:"图表名称"}},[a("el-input",{model:{value:e.allChartUtilData.title,callback:function(t){e.$set(e.allChartUtilData,"title",t)},expression:"allChartUtilData.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"横坐标名称"}},[a("el-input",{model:{value:e.allChartUtilData.xName,callback:function(t){e.$set(e.allChartUtilData,"xName",t)},expression:"allChartUtilData.xName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"纵坐标名称"}},[a("el-input",{model:{value:e.allChartUtilData.yName,callback:function(t){e.$set(e.allChartUtilData,"yName",t)},expression:"allChartUtilData.yName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选择类型"}},[a("el-select",{model:{value:e.allChartUtilData.type,callback:function(t){e.$set(e.allChartUtilData,"type",t)},expression:"allChartUtilData.type"}},[a("el-option",{attrs:{value:"pace",label:"节拍时间"}}),a("el-option",{attrs:{value:"cycle",label:"程序时间"}})],1)],1)],1)],1)],1),a("div",{staticClass:"main-main"},[a("IEcharts",{key:"allChart",staticStyle:{width:"100%",height:"100%"},attrs:{"auto-resize":!0,option:e.allChartOption}})],1)])],1)],1)],1)},[],!1,null,"7d3d0123",null);c.options.__file="efficiency.vue";t.default=c.exports}}]);